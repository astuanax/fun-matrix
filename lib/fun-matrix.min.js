!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("fun-matrix",[],n):"object"==typeof exports?exports["fun-matrix"]=n():t["fun-matrix"]=n()}("undefined"!=typeof self?self:this,function(){return function(t){var n={};function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)e.d(r,o,function(n){return t[n]}.bind(null,o));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=0)}([function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,o=(r=e(1))&&r.__esModule?r:{default:r};var u=(0,o.default)(function(t,n){return n.map(function(n,e){return Array.prototype.concat.call(n,t.__value[e])})}),f=(0,o.default)(function(t,n){return n.map(function(n,e){return n.map(function(n,r){return n+t.__value[e][r]})})}),a=(0,o.default)(function(t,n){return n.map(function(n){return n.map(function(n){return n+t.__value})})}),i=(0,o.default)(function(t,n){for(var e=[],r=0;r<t.__value.length;r++)for(var o=0;o<n[0].length;o++){for(var u=0,f=0;f<t.__value[0].length;f++)u+=t.__value[r][f]*n[f][o];e[r]=e[r]||[],e[r][o]=u}return e}),c=(0,o.default)(function(t){return t.map(function(t){return[]})}),l=(0,o.default)(function(t){return t.map(function(t,n){return t.map(function(t,e){return 1*(n===e)})})}),p=function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];if(1===arguments.length)this.__value=n[0];else{rows=n[0],cols=n[1];var r=n[2];this.__value=void 0===r?[]:r,0===this.__value.length&&(this.__value=Array.apply(null,Array(rows)).map(function(t){return Array.apply(null,Array(cols))}))}};p.of=function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return 1!==arguments.length?new(Function.prototype.bind.apply(p,[null].concat(n))):(value=n[0],value instanceof p?value:this instanceof p?void(this.__value=value):new p(value))},p.prototype.fmap=function(t){return p.of(t(this.__value))},p.fmap=(0,o.default)(function(t,n){return p.of(n).fmap(t)}),p.prototype.map=p.prototype.fmap,p.map=p.fmap,p.prototype.ap=function(t){return p.of(t).fmap(this.__value)},p.ap=(0,o.default)(function(t,n){return p.of(t).ap(n)}),p.prototype.concat=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u;return p.of(this).fmap(n(t))},p.concat=(0,o.default)(function(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u;return p.of(t).fmap(e(n))}),p.prototype.empty=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c;return p.of(this.__value.length,this.__value[0].length).fmap(t)},p.empty=(0,o.default)(function(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c;return p.of(t,n).fmap(e)}),p.prototype.identity=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l;return p.of(this).empty(t)},p.identity=function(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l;return p.empty(t,n,e)},p.prototype.combine=function(t){return p.of(this).concat(p.of(t))},p.combine=function(t,n){return p.of(t).concat(p.of(n))},p.prototype.dot=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i;return p.of(this).concat(p.of(t),n)},p.dot=function(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i;return p.of(t).concat(p.of(n),e)},p.prototype.fill=function(t){return p.of(this).fmap(function(n){return n.map(function(n){return n.map(function(n){return t()})})})},p.prototype.zeros=function(){return p.of(this).fill(function(t){return 0})},p.prototype.ones=function(){return p.of(this).fill(function(t){return 1})},p.prototype.random=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(t){return 2*Math.random()-1};return p.of(this).fill(t)},p.prototype.toArray=function(){return this.__value.map(function(t){return t.map(function(t){return t})})},p.fromArray=function(t){return p.of(t.map(function(t){return t.map(function(t){return t})}))},p.prototype.transpose=function(){return p.of(this).fmap(function(t){return t.reduce(function(t,n){return n.map(function(e,r){return(t[r]||[]).concat(n[r])})},[])})},p.transpose=function(t){return p.of(t).transpose()},p.prototype.add=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f;return p.of(this).concat(p.of(t),n)},p.prototype.addScalar=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;return p.of(this).concat(p.of(t),n)};var d=p;n.default=d,t.exports=n.default},function(t,n,e){"use strict";e.r(n),n.default=function(t){let n=t.length;return 0===n?t:e([]);function e(r){return function(){let o=Array.prototype.slice.call(arguments);return function(r,o){let u=r.concat(o);return u.length<n?e(u):t.apply(this,u)}(r,o)}}}}])});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mdW4tbWF0cml4L3dlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIndlYnBhY2s6Ly9mdW4tbWF0cml4L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2Z1bi1tYXRyaXgvLi9zcmMvbWF0cml4LmpzIiwid2VicGFjazovL2Z1bi1tYXRyaXgvLi9ub2RlX21vZHVsZXMvZnVuLmpzL3NyYy91dGlsL2N1cnJ5LmpzIl0sIm5hbWVzIjpbInJvb3QiLCJmYWN0b3J5IiwiZXhwb3J0cyIsIm1vZHVsZSIsImRlZmluZSIsImFtZCIsInNlbGYiLCJ0aGlzIiwiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIl9jdXJyeSIsImNvbmNhdE1hdHJpeCIsImRlZmF1bHQiLCJNIiwibWFwIiwicm93cyIsImlkeCIsIkFycmF5IiwiY29uY2F0IiwiX192YWx1ZSIsImFkZE1hdHJpeCIsInJvdyIsImNvbCIsImpkeCIsImFkZFNjYWxhciIsImRvdCIsIlgiLCJ5IiwicmVzdWx0IiwibGVuZ3RoIiwiaiIsInN1bSIsImsiLCJlbXB0eU1hdHJpeCIsImlkZW50aXR5TWF0cml4IiwiY29scyIsIk1hdHJpeCIsIl9sZW4iLCJhcmd1bWVudHMiLCJfa2V5IiwiX3ZhbHVlJCIsImFwcGx5IiwieCIsIm9mIiwiX2xlbjIiLCJhcmdzIiwiX2tleTIiLCJGdW5jdGlvbiIsImZtYXAiLCJmIiwiYXAiLCJ1bmRlZmluZWQiLCJBIiwiQiIsImVtcHR5IiwiaWRlbnRpdHkiLCJjb21iaW5lIiwiZmlsbCIsInplcm9zIiwib25lcyIsInJhbmRvbSIsImUiLCJNYXRoIiwidG9BcnJheSIsImZyb21BcnJheSIsImFyciIsInRyYW5zcG9zZSIsInJlZHVjZSIsInByZXYiLCJuZXh0IiwiaXRlbSIsImFkZCIsIl9fd2VicGFja19leHBvcnRzX18iLCJmdW4iLCJhcmdzbGVuIiwiY3JlYXRlUmVjdXJzZXIiLCJhY2MiLCJzbGljZSIsIl9hY2MiLCJyZWN1cnNlIl0sIm1hcHBpbmdzIjoiQ0FBQSxTQUFBQSxFQUFBQyxHQUNBLGlCQUFBQyxTQUFBLGlCQUFBQyxPQUNBQSxPQUFBRCxRQUFBRCxJQUNBLG1CQUFBRyxlQUFBQyxJQUNBRCxPQUFBLGdCQUFBSCxHQUNBLGlCQUFBQyxRQUNBQSxRQUFBLGNBQUFELElBRUFELEVBQUEsY0FBQUMsSUFSQSxDQVNDLG9CQUFBSyxVQUFBQyxLQUFBLFdBQ0QsbUJDVEEsSUFBQUMsRUFBQSxHQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBUixRQUdBLElBQUFDLEVBQUFLLEVBQUFFLEdBQUEsQ0FDQUMsRUFBQUQsRUFDQUUsR0FBQSxFQUNBVixRQUFBLElBVUEsT0FOQVcsRUFBQUgsR0FBQUksS0FBQVgsRUFBQUQsUUFBQUMsSUFBQUQsUUFBQU8sR0FHQU4sRUFBQVMsR0FBQSxFQUdBVCxFQUFBRCxRQTBEQSxPQXJEQU8sRUFBQU0sRUFBQUYsRUFHQUosRUFBQU8sRUFBQVIsRUFHQUMsRUFBQVEsRUFBQSxTQUFBZixFQUFBZ0IsRUFBQUMsR0FDQVYsRUFBQVcsRUFBQWxCLEVBQUFnQixJQUNBRyxPQUFBQyxlQUFBcEIsRUFBQWdCLEVBQUEsQ0FBMENLLFlBQUEsRUFBQUMsSUFBQUwsS0FLMUNWLEVBQUFnQixFQUFBLFNBQUF2QixHQUNBLG9CQUFBd0IsZUFBQUMsYUFDQU4sT0FBQUMsZUFB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RzlCLEdBQUlvQyxVQUcvQmIsZ0VDdEtmNUQsRUFBQWdCLEVBQUFnRixHQUllQSxFQUFBLGlCQUFBQyxHQUNmLElBQUFDLEVBQUFELEVBQUE1QyxPQUVBLFdBQUE2QyxFQUNBRCxFQUVBRSxFQUFBLElBV0EsU0FBQUEsRUFBQUMsR0FDQSxrQkFDQSxJQUFBL0IsRUFBQTVCLE1BQUFYLFVBQUF1RSxNQUFBaEcsS0FBQXlELFdBRUEsT0FiQSxTQUFBc0MsRUFBQS9CLEdBQ0EsSUFBQWlDLEVBQUFGLEVBQUExRCxPQUFBMkIsR0FFQSxPQUFBaUMsRUFBQWpELE9BQUE2QyxFQUNBQyxFQUFBRyxHQUVBTCxFQUFBaEMsTUFBQW5FLEtBQUF3RyxHQU9BQyxDQUFBSCxFQUFBL0IiLCJmaWxlIjoiZnVuLW1hdHJpeC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShcImZ1bi1tYXRyaXhcIiwgW10sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wiZnVuLW1hdHJpeFwiXSA9IGZhY3RvcnkoKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJmdW4tbWF0cml4XCJdID0gZmFjdG9yeSgpO1xufSkodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHRoaXMsIGZ1bmN0aW9uKCkge1xucmV0dXJuICIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsIi8vIHZhciBjdXJyeSA9IHJlcXVpcmUoJ2Z1bi5qcycpLmN1cnJ5XG4vLyBpbXBvcnQgY3VycnkgZnJvbSAnLi9jdXJyeSdcbmltcG9ydCBjdXJyeSBmcm9tICdmdW4uanMvc3JjL3V0aWwvY3VycnknXG5cbmNvbnN0IGNvbmNhdE1hdHJpeCA9IGN1cnJ5KChNLCBtKSA9PiBtLm1hcCgocm93cywgaWR4KSA9PiBBcnJheS5wcm90b3R5cGUuY29uY2F0LmNhbGwocm93cywgTS5fX3ZhbHVlW2lkeF0pKSlcblxuY29uc3QgYWRkTWF0cml4ID0gY3VycnkoKE0sIG0pID0+IG0ubWFwKChyb3csIGlkeCkgPT4gcm93Lm1hcCgoY29sLCBqZHgpID0+IGNvbCArIE0uX192YWx1ZVtpZHhdW2pkeF0pKSlcblxuY29uc3QgYWRkU2NhbGFyID0gY3VycnkoKE0sIG0pID0+IHtcbiAgcmV0dXJuIG0ubWFwKHJvdyA9PiByb3cubWFwKGNvbCA9PiBjb2wgKyBNLl9fdmFsdWUpKVxufSlcblxuY29uc3QgZG90ID0gY3VycnkoKFgsIHkpID0+IHtcbiAgbGV0IHJlc3VsdCA9IFtdXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgWC5fX3ZhbHVlLmxlbmd0aDsgaSsrKSB7XG4gICAgZm9yIChsZXQgaiA9IDA7IGogPCB5WzBdLmxlbmd0aDsgaisrKSB7XG4gICAgICAvLyBsZXQgdmFsID0gWC5fX3ZhbHVlW2ldW2pdXG4gICAgICBsZXQgc3VtID0gMFxuICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCBYLl9fdmFsdWVbMF0ubGVuZ3RoOyBrKyspIHtcbiAgICAgICAgc3VtICs9IFguX192YWx1ZVtpXVtrXSAqIHlba11bal1cbiAgICAgIH1cbiAgICAgIHJlc3VsdFtpXSA9IHJlc3VsdFtpXSB8fCBbXVxuICAgICAgcmVzdWx0W2ldW2pdID0gc3VtXG4gICAgfVxuICB9XG4gIHJldHVybiByZXN1bHRcbn0pXG5cbmNvbnN0IGVtcHR5TWF0cml4ID0gY3VycnkobSA9PiBtLm1hcChyb3dzID0+IFtdKSlcblxuY29uc3QgaWRlbnRpdHlNYXRyaXggPSBjdXJyeShtID0+IG0ubWFwKChyb3dzLCBpZHgpID0+IHJvd3MubWFwKChjb2xzLCBqZHgpID0+IChpZHggPT09IGpkeCkgKiAxKSkpXG5cbmxldCBNYXRyaXggPSBmdW5jdGlvbiAoLi4udmFsdWUpIHtcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHtcbiAgICBbdGhpcy5fX3ZhbHVlXSA9IHZhbHVlXG4gIH0gZWxzZSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVmXG4gICAgW3Jvd3MsIGNvbHMsIHRoaXMuX192YWx1ZSA9IFtdXSA9IHZhbHVlXG4gICAgaWYgKHRoaXMuX192YWx1ZS5sZW5ndGggPT09IDApIHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZlxuICAgICAgdGhpcy5fX3ZhbHVlID0gQXJyYXkuYXBwbHkobnVsbCwgQXJyYXkocm93cykpLm1hcCh4ID0+IEFycmF5LmFwcGx5KG51bGwsIEFycmF5KGNvbHMpKSlcbiAgICB9XG4gIH1cbn1cblxuTWF0cml4Lm9mID0gZnVuY3Rpb24gKC4uLmFyZ3MpIHtcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZWZcbiAgICBbdmFsdWVdID0gYXJnc1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZlxuICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIE1hdHJpeCkgcmV0dXJuIHZhbHVlXG4gICAgaWYgKHRoaXMgaW5zdGFuY2VvZiBNYXRyaXgpIHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZlxuICAgICAgdGhpcy5fX3ZhbHVlID0gdmFsdWVcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVmXG4gICAgICByZXR1cm4gbmV3IE1hdHJpeCh2YWx1ZSlcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIG5ldyBNYXRyaXgoLi4uYXJncylcbiAgfVxufVxuXG5NYXRyaXgucHJvdG90eXBlLmZtYXAgPSBmdW5jdGlvbiAoZikge1xuICByZXR1cm4gTWF0cml4Lm9mKGYodGhpcy5fX3ZhbHVlKSlcbn1cblxuTWF0cml4LmZtYXAgPSBjdXJyeShmdW5jdGlvbiAoZiwgTSkge1xuICByZXR1cm4gTWF0cml4Lm9mKE0pLmZtYXAoZikgLy8gKGYoTS5fX3ZhbHVlKSlcbn0pXG5cbk1hdHJpeC5wcm90b3R5cGUubWFwID0gTWF0cml4LnByb3RvdHlwZS5mbWFwXG5NYXRyaXgubWFwID0gTWF0cml4LmZtYXBcblxuTWF0cml4LnByb3RvdHlwZS5hcCA9IGZ1bmN0aW9uIChNKSB7XG4gIHJldHVybiBNYXRyaXgub2YoTSkuZm1hcCh0aGlzLl9fdmFsdWUpXG59XG5cbk1hdHJpeC5hcCA9IGN1cnJ5KGZ1bmN0aW9uIChmLCBNKSB7XG4gIHJldHVybiBNYXRyaXgub2YoZikuYXAoTSlcbn0pXG5cbk1hdHJpeC5wcm90b3R5cGUuY29uY2F0ID0gZnVuY3Rpb24gKE0sIGYgPSBjb25jYXRNYXRyaXgpIHtcbiAgcmV0dXJuIE1hdHJpeC5vZih0aGlzKS5mbWFwKGYoTSkpXG59XG5cbk1hdHJpeC5jb25jYXQgPSBjdXJyeShmdW5jdGlvbiAoQSwgQiwgZiA9IGNvbmNhdE1hdHJpeCkge1xuICByZXR1cm4gTWF0cml4Lm9mKEEpLmZtYXAoZihCKSlcbn0pXG5cbk1hdHJpeC5wcm90b3R5cGUuZW1wdHkgPSBmdW5jdGlvbiAoZiA9IGVtcHR5TWF0cml4KSB7XG4gIHJldHVybiBNYXRyaXgub2YodGhpcy5fX3ZhbHVlLmxlbmd0aCwgdGhpcy5fX3ZhbHVlWzBdLmxlbmd0aCkuZm1hcChmKVxufVxuXG5NYXRyaXguZW1wdHkgPSBjdXJyeShmdW5jdGlvbiAocm93cywgY29scywgZiA9IGVtcHR5TWF0cml4KSB7XG4gIHJldHVybiBNYXRyaXgub2Yocm93cywgY29scykuZm1hcChmKVxufSlcblxuLy8gIyMjIyAjIyMjICMjIyMgLy9cblxuTWF0cml4LnByb3RvdHlwZS5pZGVudGl0eSA9IGZ1bmN0aW9uIChmID0gaWRlbnRpdHlNYXRyaXgpIHtcbiAgcmV0dXJuIE1hdHJpeC5vZih0aGlzKS5lbXB0eShmKVxufVxuXG5NYXRyaXguaWRlbnRpdHkgPSBmdW5jdGlvbiAobSwgbiwgZiA9IGlkZW50aXR5TWF0cml4KSB7XG4gIHJldHVybiBNYXRyaXguZW1wdHkobSwgbiwgZilcbn1cblxuTWF0cml4LnByb3RvdHlwZS5jb21iaW5lID0gZnVuY3Rpb24gKE0pIHtcbiAgcmV0dXJuIE1hdHJpeC5vZih0aGlzKS5jb25jYXQoTWF0cml4Lm9mKE0pKVxufVxuXG5NYXRyaXguY29tYmluZSA9IGZ1bmN0aW9uIChBLCBCKSB7XG4gIHJldHVybiBNYXRyaXgub2YoQSkuY29uY2F0KE1hdHJpeC5vZihCKSlcbn1cblxuTWF0cml4LnByb3RvdHlwZS5kb3QgPSBmdW5jdGlvbiAoTSwgZiA9IGRvdCkge1xuICByZXR1cm4gTWF0cml4Lm9mKHRoaXMpLmNvbmNhdChNYXRyaXgub2YoTSksIGYpXG59XG5cbk1hdHJpeC5kb3QgPSBmdW5jdGlvbiAoQSwgQiwgZiA9IGRvdCkge1xuICByZXR1cm4gTWF0cml4Lm9mKEEpLmNvbmNhdChNYXRyaXgub2YoQiksIGYpXG59XG5cbk1hdHJpeC5wcm90b3R5cGUuZmlsbCA9IGZ1bmN0aW9uIChmKSB7XG4gIHJldHVybiBNYXRyaXgub2YodGhpcykuZm1hcChtID0+IG0ubWFwKHggPT4geC5tYXAoeSA9PiBmKCkpKSlcbn1cblxuTWF0cml4LnByb3RvdHlwZS56ZXJvcyA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIE1hdHJpeC5vZih0aGlzKS5maWxsKHggPT4gMClcbn1cblxuTWF0cml4LnByb3RvdHlwZS5vbmVzID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gTWF0cml4Lm9mKHRoaXMpLmZpbGwoeCA9PiAxKVxufVxuXG5NYXRyaXgucHJvdG90eXBlLnJhbmRvbSA9IGZ1bmN0aW9uIChmID0gZSA9PiBNYXRoLnJhbmRvbSgpICogMiAtIDEpIHtcbiAgcmV0dXJuIE1hdHJpeC5vZih0aGlzKS5maWxsKGYpXG59XG5cbk1hdHJpeC5wcm90b3R5cGUudG9BcnJheSA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHRoaXMuX192YWx1ZS5tYXAocm93ID0+IHJvdy5tYXAoY29sID0+IGNvbCkpXG59XG5cbk1hdHJpeC5mcm9tQXJyYXkgPSBmdW5jdGlvbiAoYXJyKSB7XG4gIHJldHVybiBNYXRyaXgub2YoYXJyLm1hcChyb3cgPT4gcm93Lm1hcChjb2wgPT4gY29sKSkpXG59XG5cbk1hdHJpeC5wcm90b3R5cGUudHJhbnNwb3NlID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gTWF0cml4Lm9mKHRoaXMpLmZtYXAobSA9PiBtLnJlZHVjZSgocHJldiwgbmV4dCkgPT4gbmV4dC5tYXAoKGl0ZW0sIGkpID0+XG4gICAgKHByZXZbaV0gfHwgW10pLmNvbmNhdChuZXh0W2ldKVxuICApLCBbXSkpXG59XG5cbk1hdHJpeC50cmFuc3Bvc2UgPSBmdW5jdGlvbiAoTSkge1xuICByZXR1cm4gTWF0cml4Lm9mKE0pLnRyYW5zcG9zZSgpXG59XG5cbk1hdHJpeC5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKE0sIGYgPSBhZGRNYXRyaXgpIHtcbiAgcmV0dXJuIE1hdHJpeC5vZih0aGlzKS5jb25jYXQoTWF0cml4Lm9mKE0pLCBmKVxufVxuXG5NYXRyaXgucHJvdG90eXBlLmFkZFNjYWxhciA9IGZ1bmN0aW9uIChNLCBmID0gYWRkU2NhbGFyKSB7XG4gIHJldHVybiBNYXRyaXgub2YodGhpcykuY29uY2F0KE1hdHJpeC5vZihNKSwgZilcbn1cblxuZXhwb3J0IGRlZmF1bHQgTWF0cml4XG4iLCIvKiBlc2xpbnQtZGlzYWJsZSBuby11c2UtYmVmb3JlLWRlZmluZSAqL1xuLyoqXG4gKiBDcmVhdGVkIGJ5IGRpZXJpY2t4LmxlbiBvbiAyNS8wMy8yMDE3LlxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAoZnVuKSB7XG4gIGxldCBhcmdzbGVuID0gZnVuLmxlbmd0aDtcblxuICBpZiAoYXJnc2xlbiA9PT0gMCkge1xuICAgIHJldHVybiBmdW47XG4gIH1cbiAgcmV0dXJuIGNyZWF0ZVJlY3Vyc2VyKFtdKTtcblxuICBmdW5jdGlvbiByZWN1cnNlKGFjYywgYXJncykge1xuICAgIGxldCBfYWNjID0gYWNjLmNvbmNhdChhcmdzKTtcblxuICAgIGlmIChfYWNjLmxlbmd0aCA8IGFyZ3NsZW4pIHtcbiAgICAgIHJldHVybiBjcmVhdGVSZWN1cnNlcihfYWNjKTtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bi5hcHBseSh0aGlzLCBfYWNjKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNyZWF0ZVJlY3Vyc2VyKGFjYykge1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICBsZXQgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7XG5cbiAgICAgIHJldHVybiByZWN1cnNlKGFjYywgYXJncyk7XG4gICAgfTtcbiAgfVxufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==